(function() {
 const 	slider		 = document.querySelector(".content__slider"),
 			control      = document.querySelectorAll(".content__slide"),
 			prev 		    = slider.querySelector(".content__prev"),
 			next         = slider.querySelector(".content__next"),
 			lArrow 		 = document.querySelector(".content__Larrow"),
 			RArrow	    = document.querySelector(".content__Rarrow"),
 			sliderIMG 	 = slider.querySelector(".content__slideIMG"),
 			sliderAmount = sliderIMG.querySelectorAll("img").length,
 			slideWidth 	 = sliderIMG.clientWidth;
 			//slide
 let widthCounter = 0;
 let slideCounter = 0;
 
 prev.style.display = "none";
 
 next.addEventListener("click", slideRight);
 prev.addEventListener("click", slideLeft);
 
 const checkPosRight = (cWidth, sWidth, p) => 
 	cWidth >= -sWidth ? p.style.display = "none" : 0
 
 const checkPosLeft = (cWidth, sWidth, sAmount, n) => 
 	cWidth <= -sWidth * (sAmount - 2) ? n.style.display = "none" : 0
 
 const display = arrow => arrow.style.display === "none" 
 	? arrow.style.display = "flex"
 	: 0
 
 function slideLeft() {
 	checkPosRight(widthCounter, slideWidth, prev);
 	display(next);
 	sliderIMG.style.left = `${widthCounter += slideWidth}px`;
 	control[slideCounter].classList.remove("selectedSlide");
 	slideCounter--;
 	control[slideCounter].classList.add("selectedSlide");
 }
 
 control[0].classList.add("selectedSlide");
 function slideRight() {
 	checkPosLeft(widthCounter, slideWidth, sliderAmount, next);
 	display(prev);
 	sliderIMG.style.left = `${widthCounter -= slideWidth}px`;
 	slideCounter++;
 	control[slideCounter].classList.add("selectedSlide");
 	control[--slideCounter].classList.remove("selectedSlide");
 	slideCounter++;
 } 
 
})();
const carousel = document.querySelector(".main__gallery"),
			prevButton = carousel.querySelector(".prev"),
			nextButton = carousel.querySelector(".next"),
			carouselBlock = carousel.querySelector(".gallery__imgs"),
			carouselWrap = carousel.querySelector(".gallery__wrap"),
			scrolWidth = carouselWrap.offsetWidth,
			imgWidth = carousel.querySelector("img").clientWidth;
			fullSize = carouselBlock.offsetWidth;
let	allSlides = carousel.querySelectorAll("img");

prevButton.addEventListener("click", slideL);
nextButton.addEventListener("click", slideR);

const parsePX = elem => elem === "" ? 0 : parseFloat(elem)

const insertSlides = position =>
	position 
	 ? allSlides.forEach(element => carouselBlock.appendChild(element.cloneNode())) 
	 : allSlides.forEach(element => carouselBlock.insertBefore(element.cloneNode(), allSlides[0]))

const takeSlidesWidth = slides => slides.length * slides[0].offsetWidth;

const incrementPos = value => parsePX(carouselBlock.style.left) + value;

const transformX = width => carouselBlock.style.left = `${incrementPos(width)}px`

//const checkPos = pos => takeSlidesWidth(docum

const initialWidth = takeSlidesWidth(allSlides);
insertSlides(true);
insertSlides(false);
transformX(-initialWidth);

function slideR() {
	const counter = transformX(-allSlides[0].offsetWidth);
	console.log(counter, takeSlidesWidth(carousel.querySelectorAll("img")) );

	if(parsePX(counter) < -takeSlidesWidth(carousel.querySelectorAll("img")) + carouselWrap.offsetWidth) {
		carouselBlock.style.transition = "null";
		transformX(initialWidth + allSlides[0].offsetWidth);
		setTimeout(() => {
			carouselBlock.style.transition = "left 0.5s";
			transformX(-allSlides[0].offsetWidth)
		}, 5)
	}
}

function slideL() {
	const counter = transformX(allSlides[0].offsetWidth);

	if(parsePX(counter) > 0) {
		carouselBlock.style.transition = "null";
		transformX(-initialWidth - allSlides[0].offsetWidth);
		setTimeout(() => {
			carouselBlock.style.transition = "left 0.5s";
			transformX(allSlides[0].offsetWidth)
		}, 5)
	}
}

// const parsPX = (elem) => elem === ""
// 	? 0
// 	: parseFloat(elem)

// let removedSlides = [];
// const removeSlide = () => {
// 	allSlides = carousel.querySelectorAll("img");
// 	for(let i = 0; i < 4; i ++) {
// 		removedSlides.push(allSlides[i].cloneNode());
// 		//allSlides[i].remove();
// 	}
// } 

// const appendSlide = () => {
// 	removedSlides.forEach(slide => {
// 		carouselBlock.appendChild(slide);
// 	});
// 	removedSlides = [];
// }

// function slideR() {
// 	carouselBlock.style.left = `${parsPX(carouselBlock.style.left) - imgWidth * 2}px`;
// 	removeSlide();
// 	appendSlide();
// }

